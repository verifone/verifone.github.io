<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Carbon Developer APIs: src/com/verifone/examples/ReceiverExample.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Carbon Developer APIs
   </div>
   <div id="projectbrief">Updated on 2016-06-24. Version 1.3.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_receiver_example_8java_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ReceiverExample.java</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">package </span>com.verifone.examples;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> android.content.BroadcastReceiver;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> android.content.Context;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">import</span> android.content.Intent;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1utilities.html">utilities</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_conversion_utility.html">ConversionUtility</a>;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1entities.html">entities</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html">Offer</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">triggers</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">triggers</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html">CommerceMessageBuilder</a>;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">triggers</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>.api.AppReceivesAppendReceipt;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">triggers</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>.payment.CommerceReceivesLoyalty;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce.html">commerce</a>.<a class="code" href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">triggers</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>.payment.CommerceRequestsLoyalty;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Example receiver for Commerce Platform Triggers. </span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Please note this class is built as an example, and therefore favors simplicity and accessibility over Android best practices.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * @see Please refer to the Android documentation at http://developer.android.com/reference/android/content/BroadcastReceiver.html for further information.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html">   21</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html">ReceiverExample</a> <span class="keyword">extends</span> BroadcastReceiver {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    @Override</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html#afe2ab6137f59f9ff640f1e3b74080ad7">   24</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html#afe2ab6137f59f9ff640f1e3b74080ad7">onReceive</a>(Context context, Intent intent) {<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">        /**</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">         * Generating a Commerce Message object from the intent. </span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">         * The builder will always return the appropriate concrete class for the intent.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">         * {@code </span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">         *        CommerceMessageBuilder builder = new CommerceMessage.CommerceMessageBuilder();</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">         *        CommerceMessage message = builder.buildMessageFromIntent(intent);</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">         * }</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html">CommerceMessageBuilder</a> builder = <span class="keyword">new</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html">CommerceMessageBuilder</a>();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">CommerceMessage</a> message = builder.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html#aaf389c6e898b904a73a9252082fad973">buildMessageFromIntent</a>(intent);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keywordflow">switch</span> (message.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html#a2a28b0ed9032db78df7f5afb6bf38486">getName</a>()) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keywordflow">case</span> CommerceRequestsLoyalty.NAME;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                this.requestsLoyaltyExample((CommerceRequestsLoyalty) message);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <span class="keywordflow">case</span> AppReceivesAppendReceipt.NAME;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                this.appendReceiptExample((AppReceivesAppendReceipt) message);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">        /**</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">         * Starting a service within the onReceive. </span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">         * Assumes ServiceExample is a registered service.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">         * {@code </span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">         *        Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         *        intent.setComponent(ServiceExample.class);</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">         *        context.startService(intent);</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">         * }</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="comment">// intent.setComponent(ServiceExample.class);</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="comment">// context.startService(intent);</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">        /**</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">         * Binding to a service within the onReceive. </span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">         * Assumes ServiceExample is a registered service.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">         * {@code </span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">         *        Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">         *        intent.setComponent(ServiceExample.class);</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">         *        IBinder binder = this.peekService(context, intent);</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">         * }</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="comment">// Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">// intent.setComponent(ServiceExample.class);</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">// IBinder binder = this.peekService(context, intent);</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">        /**</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">         * Starting an activity within the onReceive.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">         * Assumes ActivityExample is a registered activity.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">         * {@code </span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">         *        Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">         *        intent.setComponent(ActivityExample.class);</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">         *        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">         *        context.startActivity(intent);</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">         * }</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// Intent intent = new Intent(intent);</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// intent.setComponent(ActivityExample.class);</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">// intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">// context.startActivity(intent);</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">    /** Example to handle a loyalty request from the payment terminal and respond with an offer. */</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> requestsLoyaltyExample(CommerceRequestsLoyalty message) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">// Normally, get more information about the transaction to determine if the customer qualifies for an offer, but in this example, just offer away.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html">Offer</a> offer = <span class="keyword">new</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html">Offer</a>();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        offer.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#adcbc3462b68b277553e88c2e79242d28">setOfferId</a>(<span class="stringliteral">&quot;offerid&quot;</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        offer.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#af8317513ba98bc0b5f25834cc4a139da">setOfferType</a>(<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html">Offer</a>.<a class="code" href="enumcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_1_1_offer_type.html">OfferType</a>.TRANSACTION_DISCOUNT);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        offer.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#adf24e249468a7750d158c93fe2ef1159">setOfferDescription</a>(<span class="stringliteral">&quot;20% off everything!&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        offer.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#a57b2b9b3da825342d676825b24174dab">setOfferPercentDiscount</a>(<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_conversion_utility.html">ConversionUtility</a>.parseAmt(.2d));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        offer.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#a90d1c3a0d06b62240e75fda8643d7431">setProgramId</a>(<span class="stringliteral">&quot;programid&quot;</span>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        CommerceReceivesLoyalty responseMessage = message.generateResponse();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        responseMessage.setPublisher(<span class="stringliteral">&quot;TestLoyaltyPublisher&quot;</span>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        responseMessage.setPublisherId(<span class="stringliteral">&quot;testid&quot;</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        responseMessage.addLoyaltyOffer(offer);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        Status sendStatus = responseMessage.send();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (sendStatus.getStatus() == 0) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="comment">// Sent successfully.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="comment">// Failed to send. Handle error appropriately.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    /** Example to handle attempting to append to the receipt. */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> appendReceiptExample(AppReceivesAppendReceipt message) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">if</span> (message.getStatus().getStatus() == 0) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="comment">// Successfully appended to the receipt!</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">// Failed to append to the receipt. Handle error appropriately.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html_af8317513ba98bc0b5f25834cc4a139da"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#af8317513ba98bc0b5f25834cc4a139da">com.verifone.commerce.entities.Offer.setOfferType</a></div><div class="ttdeci">abstract void setOfferType(OfferType offerType)</div><div class="ttdoc">The type of the offer. </div></div>
<div class="ttc" id="namespacecom_1_1verifone_1_1utilities_html"><div class="ttname"><a href="namespacecom_1_1verifone_1_1utilities.html">com.verifone.utilities</a></div><div class="ttdef"><b>Definition:</b> <a href="_conversion_utility_8java_source.html#l00001">ConversionUtility.java:1</a></div></div>
<div class="ttc" id="namespacecom_html"><div class="ttname"><a href="namespacecom.html">com</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_conversion_utility_html"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_conversion_utility.html">com.verifone.utilities.ConversionUtility</a></div><div class="ttdoc">Enables conversion between types. </div><div class="ttdef"><b>Definition:</b> <a href="_conversion_utility_8java_source.html#l00006">ConversionUtility.java:6</a></div></div>
<div class="ttc" id="namespacecom_1_1verifone_1_1commerce_1_1entities_html"><div class="ttname"><a href="namespacecom_1_1verifone_1_1commerce_1_1entities.html">com.verifone.commerce.entities</a></div><div class="ttdoc">Provides the basic entities needed when interacting with the payment application and transaction even...</div><div class="ttdef"><b>Definition:</b> <a href="_amount_adjustment_8java_source.html#l00001">AmountAdjustment.java:1</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1examples_1_1_receiver_example_html_afe2ab6137f59f9ff640f1e3b74080ad7"><div class="ttname"><a href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html#afe2ab6137f59f9ff640f1e3b74080ad7">com.verifone.examples.ReceiverExample.onReceive</a></div><div class="ttdeci">void onReceive(Context context, Intent intent)</div><div class="ttdef"><b>Definition:</b> <a href="_receiver_example_8java_source.html#l00024">ReceiverExample.java:24</a></div></div>
<div class="ttc" id="namespacecom_1_1verifone_1_1commerce_html"><div class="ttname"><a href="namespacecom_1_1verifone_1_1commerce.html">com.verifone.commerce</a></div><div class="ttdoc">Provides the interface for all communication between the payment terminal and Android applications...</div><div class="ttdef"><b>Definition:</b> <a href="_commerce_event_8java_source.html#l00001">CommerceEvent.java:1</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder_html"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html">com.verifone.commerce.triggers.CommerceMessage.CommerceMessageBuilder</a></div><div class="ttdoc">The Builder class for creating message objects, particularly helpful when receiving a message...</div><div class="ttdef"><b>Definition:</b> <a href="_commerce_message_8java_source.html#l00027">CommerceMessage.java:27</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html_a90d1c3a0d06b62240e75fda8643d7431"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#a90d1c3a0d06b62240e75fda8643d7431">com.verifone.commerce.entities.Offer.setProgramId</a></div><div class="ttdeci">abstract void setProgramId(String programId)</div><div class="ttdoc">Unique reference to identify the Loyalty Program. </div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html_adf24e249468a7750d158c93fe2ef1159"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#adf24e249468a7750d158c93fe2ef1159">com.verifone.commerce.entities.Offer.setOfferDescription</a></div><div class="ttdeci">abstract void setOfferDescription(String offerDescription)</div><div class="ttdoc">A human-readable description of the offer, e.g., 20% off one pair of shoes. </div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html_adcbc3462b68b277553e88c2e79242d28"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#adcbc3462b68b277553e88c2e79242d28">com.verifone.commerce.entities.Offer.setOfferId</a></div><div class="ttdeci">abstract void setOfferId(String offerId)</div><div class="ttdoc">Alpanumeric offer reference. </div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder_html_aaf389c6e898b904a73a9252082fad973"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_1_1_commerce_message_builder.html#aaf389c6e898b904a73a9252082fad973">com.verifone.commerce.triggers.CommerceMessage.CommerceMessageBuilder.buildMessageFromIntent</a></div><div class="ttdeci">abstract CommerceMessage buildMessageFromIntent(Intent intent)</div><div class="ttdoc">Builds the appropriate message object according to the intent, returning a concrete message object...</div></div>
<div class="ttc" id="namespacecom_1_1verifone_1_1commerce_1_1triggers_html"><div class="ttname"><a href="namespacecom_1_1verifone_1_1commerce_1_1triggers.html">com.verifone.commerce.triggers</a></div><div class="ttdoc">Contains the classes for interacting with triggers, calling simplified APIs for the payment applicati...</div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_html"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html">com.verifone.commerce.triggers.CommerceMessage</a></div><div class="ttdoc">This message provides the foundation for all messages sent between Android applications and the Termi...</div><div class="ttdef"><b>Definition:</b> <a href="_commerce_message_8java_source.html#l00011">CommerceMessage.java:11</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message_html_a2a28b0ed9032db78df7f5afb6bf38486"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1triggers_1_1_commerce_message.html#a2a28b0ed9032db78df7f5afb6bf38486">com.verifone.commerce.triggers.CommerceMessage.getName</a></div><div class="ttdeci">abstract String getName()</div><div class="ttdoc">Refer to the setter for information. </div></div>
<div class="ttc" id="enumcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_1_1_offer_type_html"><div class="ttname"><a href="enumcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_1_1_offer_type.html">com.verifone.commerce.entities.Offer.OfferType</a></div><div class="ttdef"><b>Definition:</b> <a href="_offer_8java_source.html#l00010">Offer.java:10</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html">com.verifone.commerce.entities.Offer</a></div><div class="ttdoc">This represents the data that is shared between the terminal and the Android application. </div><div class="ttdef"><b>Definition:</b> <a href="_offer_8java_source.html#l00008">Offer.java:8</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer_html_a57b2b9b3da825342d676825b24174dab"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1entities_1_1_offer.html#a57b2b9b3da825342d676825b24174dab">com.verifone.commerce.entities.Offer.setOfferPercentDiscount</a></div><div class="ttdeci">abstract void setOfferPercentDiscount(BigDecimal offerPercentDiscount)</div><div class="ttdoc">Percentage discount associated with the offer as a BigInteger(13,2). </div></div>
<div class="ttc" id="classcom_1_1verifone_1_1examples_1_1_receiver_example_html"><div class="ttname"><a href="classcom_1_1verifone_1_1examples_1_1_receiver_example.html">com.verifone.examples.ReceiverExample</a></div><div class="ttdoc">Example receiver for Commerce Platform Triggers. </div><div class="ttdef"><b>Definition:</b> <a href="_receiver_example_8java_source.html#l00021">ReceiverExample.java:21</a></div></div>
<div class="ttc" id="namespacecom_1_1verifone_html"><div class="ttname"><a href="namespacecom_1_1verifone.html">com.verifone</a></div><div class="ttdoc">The root of the SDK, providing some constants and utility methods. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div style="width: 100%;
	line-height: 140%;
	font: 400 14px/22px Roboto,sans-serif;
	color: black;">
<div style="font-size: 11px;
	background-image: url('tab_b.png');
	background-repeat: repeat-x;
	background-position: 0 -5px;
	height: 30px;
	line-height: 30px;
	color: #8AA0CC;
	border: solid 1px #C2CDE4;
	overflow: hidden;
	margin: 0px;
	padding: 0px;"></div>
<p style="font-size: 11px;
	line-height: 100%;
	color: #8AA0CC;
	border: solid 1px #C2CDE4;
	margin: 10px;
	padding: 10px;">
This document is the confidential property of Verifone, Inc. Any reproduction or distribution of this document, in whole or in part, or the disclosure of any of the information contained herein, without the prior written consent of Verifone, Inc. is prohibited. This document and any supplemental material supplied as part of any review must be returned to Verifone, Inc. upon request. Notice: This document may go through material revisions over time. While the Company will make every effort to keep readers updated as changes occur, care must be taken by the reader to make sure they are reading the latest version.  Version numbers appear in the title page and revision history page of this document. All rights reserved. Verifone, the Verifone logo are either trademarks or registered trademarks of Verifone in the United States and/or other countries. All other trademarks or brand names are properties of their respective holders.</p>
</div>