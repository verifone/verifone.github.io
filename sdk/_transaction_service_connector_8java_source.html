<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Developer SDK: src/main/java/com/verifone/commerce/payment/TransactionServiceConnector.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
<link href="custom_navtree.css" rel="stylesheet" type="text/css"/>
<link href="custom_search.css" rel="stylesheet" type="text/css"/>
<link href="custom_tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <img alt="Logo" width="100%" src="logo_v1.png"/>
    <div id="projectname">
      Developer SDK
    </div>
    <div id="projectbrief">Version 1.9.632.913d652c-152450467.</div>
  </div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_transaction_service_connector_8java_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TransactionServiceConnector.java</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">package </span>com.verifone.commerce.payment;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> android.content.ComponentName;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> android.content.Context;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">import</span> android.content.Intent;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> android.content.ServiceConnection;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> android.content.pm.PackageInfo;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> android.content.pm.PackageManager;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> android.content.pm.ResolveInfo;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> android.os.IBinder;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> android.os.IInterface;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> android.os.Looper;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> android.os.RemoteException;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> android.support.annotation.NonNull;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> android.support.annotation.Nullable;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> android.util.Log;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1verifone.html">verifone</a>.<a class="code" href="classcom_1_1verifone_1_1_constants.html">Constants</a>;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> java.util.HashMap;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> java.util.HashSet;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> java.util.List;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> java.util.Map;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">import</span> java.util.NoSuchElementException;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * Manages the binding and unbinding from the underlying service, and attaching of the</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * appropriate Transaction Manager proxy.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html">   30</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html">TransactionServiceConnector</a> {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html">TransactionServiceConnector</a>.class.getSimpleName();<span class="comment"></span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">    /** The package name for the application that supports the required services. */</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#af191a26ee178a552a2f5ab55ba8fc83f">   33</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#af191a26ee178a552a2f5ab55ba8fc83f">TRANSACTION_APPLICATION_PACKAGE</a> =</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;              <span class="stringliteral">&quot;com.verifone.commerce.payment.service&quot;</span>;<span class="comment"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">    /** The component name of the service, as compatible with this version of the library. */</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b1f5c1ca7eb70f9d6eabb1ef00109b8">   36</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ComponentName <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b1f5c1ca7eb70f9d6eabb1ef00109b8">TRANSACTION_SERVICE_COMPONENT_NAME</a> =</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;              <span class="keyword">new</span> ComponentName(TRANSACTION_APPLICATION_PACKAGE,</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                TRANSACTION_APPLICATION_PACKAGE + <span class="stringliteral">&quot;.TransactionService&quot;</span>);<span class="comment"></span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     * The action to use when locating the transaction service.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b7f9c886050faf2a698aa84493af3cb">   42</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b7f9c886050faf2a698aa84493af3cb">ACTION_TRANSACTION_SERVICE</a> = <span class="stringliteral">&quot;com.verifone.commerce.payment.ITransactionService&quot;</span>;<span class="comment"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">     * The permissions that the transaction service must use to be able to perform the payments.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a00a2e669afcba96d1e35c2d4693d7d7a">   46</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a00a2e669afcba96d1e35c2d4693d7d7a">TRANSACTION_SERVICE_PERMISSIONS</a> = <span class="keyword">new</span> String[] {<span class="stringliteral">&quot;com.verifone.commerce.manifest.permission.TRANSACTION_SERVICE&quot;</span>};<span class="comment"></span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     * Setting this EXTRA when binding to the Transaction Service allows the service to perform some</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     * error handling and reconnection on behalf of the calling application. This value should be a</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     * consistent, unique identifier for the calling application, preferably the application&#39;s</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     * package name or possibly the application&#39;s UID, or some other unique identifier.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1ed60c52af2ece4b505e1e2019ccd679">   53</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1ed60c52af2ece4b505e1e2019ccd679">EXTRA_CLIENT_IDENTIFIER</a> =</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;              <span class="stringliteral">&quot;com.verifone.commerce.payment.intent.extra.CLIENT_IDENTIFIER&quot;</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">    /** Used to track the current connection state. */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">private</span> <span class="keyword">enum</span> BindState {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        INITIAL,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        BINDING,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        BOUND,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        DISCONNECTED</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ServiceConnection SERVICE_CONNECTION = <span class="keyword">new</span> ServiceConnection() {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        @Override</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> onServiceConnected(ComponentName name, IBinder service) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keyword">synchronized</span> (CONNECTION_LOCK) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                sITransactionService = ITransactionService.Stub.asInterface(service);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                sBindState = BindState.BOUND;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    service.linkToDeath(DEATH_RECIPIENT, 0);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                } <span class="keywordflow">catch</span> (RemoteException e) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                    <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">w</a>(TAG, <span class="stringliteral">&quot;Unable to link to death for service binder.&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keywordflow">for</span> (ServiceConnection clientConnection : CLIENT_CONNECTIONS)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                    clientConnection.onServiceConnected(name, service);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                CONNECTION_LOCK.notifyAll();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        @Override</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> onServiceDisconnected(ComponentName name) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            sITransactionService = null;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            sBindState = BindState.DISCONNECTED;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">for</span> (ServiceConnection clientConnection : CLIENT_CONNECTIONS)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                clientConnection.onServiceDisconnected(name);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    };</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> IBinder.DeathRecipient DEATH_RECIPIENT = <span class="keyword">new</span> IBinder.DeathRecipient() {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        @Override</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> binderDied() {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="comment">// This is only attached to the binder for the service. Any other binders ought to be</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="comment">// handled separately.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            sBindState = BindState.DISCONNECTED;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            sITransactionService = null;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="comment">// Someday, probably automatically try to reconnect the binder that died.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    };</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    /** The collection of registered ServiceConnection objects to notify on service events. */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HashSet&lt;ServiceConnection&gt; CLIENT_CONNECTIONS = <span class="keyword">new</span> HashSet&lt;&gt;();<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /** An object to use to synchronize threads for attaching to the service. */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object CONNECTION_LOCK = <span class="keyword">new</span> Object();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> String sClientId = null;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> BindState sBindState = BindState.INITIAL;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> ITransactionService sITransactionService = null;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">     * Attempts to get the Transaction Manager binder for this client. This uses</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">     * {@link #getServiceBinder(Context)} to retrieve the current service binder, which it then</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">     * uses to get the Transaction Manager binder for the client ID. This follows the same</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">     * threading rules as {@link #getServiceBinder(Context)}.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    @Nullable</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a37e59c2492cc509f79237d58f37c64cd">  115</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> ITransactionManager <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a37e59c2492cc509f79237d58f37c64cd">getTransactionBinder</a>(Context context, Map deviceParams) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aff8b6b070c4e25c98daf141cd9867cfa">d</a>(TAG, <span class="stringliteral">&quot;getTransactionBinder&quot;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        ITransactionManager transactionBinder = null;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment">// Get service binder, vs transaction binder.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        ITransactionService serviceBinder = <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a137140f3c7bcb540deed95cb072e32c2">getServiceBinder</a>(context);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> (serviceBinder != null) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">// Call method to get transaction binder for client.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keywordflow">if</span> (deviceParams == null) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    deviceParams = <span class="keyword">new</span> HashMap();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keywordflow">if</span> (!deviceParams.containsKey(<a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html">TransactionManager</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html#aaabc6a0d5658d426a86a6fa1fc278370">DEVICE_APPLICATION_NAME_KEY</a>)) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    <span class="keyword">final</span> <span class="keywordtype">int</span> appNameResourceId = context.getApplicationInfo().labelRes;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="keywordflow">if</span> (appNameResourceId != 0) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        <span class="keyword">final</span> String applicationName = context.getString(appNameResourceId);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        deviceParams.put(<a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html">TransactionManager</a>.<a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html#aaabc6a0d5658d426a86a6fa1fc278370">DEVICE_APPLICATION_NAME_KEY</a>, applicationName);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                transactionBinder = serviceBinder.getTransactionManager(getClientId(context),</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                                                        <a class="code" href="classcom_1_1verifone_1_1_constants.html">Constants</a>.<a class="code" href="classcom_1_1verifone_1_1_constants.html#a55c29d48b001cbc9584063ecab38557b">SDK_VERSION</a>,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                                                        deviceParams,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                                                        <a class="code" href="classcom_1_1verifone_1_1_constants.html">Constants</a>.<a class="code" href="classcom_1_1verifone_1_1_constants.html#aee7e1fc8d0dc89a4552ed665c18825da">SDK_PARCEL_VERSION</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            } <span class="keywordflow">catch</span> (RemoteException e) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#af9382b923a644a15d5a395f7b069665b">e</a>(TAG, <span class="stringliteral">&quot;Unable to get transaction manager from service. &quot;</span> + e.getMessage());</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">// Return transaction binder, either null or the actual binder for the client.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> transactionBinder;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    @Nullable</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> ITerminalChannel getTerminalChannelBinder(Context context, Map deviceParams) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        ITerminalChannel terminalChannel = null;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        ITransactionService serviceBinder = <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a137140f3c7bcb540deed95cb072e32c2">getServiceBinder</a>(context);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (serviceBinder != null) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">// Call method to get transaction binder for client.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keyword">final</span> String clientId = getClientId(context);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                terminalChannel = serviceBinder.getTerminalChannel(clientId,</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                                   <a class="code" href="classcom_1_1verifone_1_1_constants.html">Constants</a>.<a class="code" href="classcom_1_1verifone_1_1_constants.html#a55c29d48b001cbc9584063ecab38557b">SDK_VERSION</a>,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                                                   deviceParams,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                   <a class="code" href="classcom_1_1verifone_1_1_constants.html">Constants</a>.<a class="code" href="classcom_1_1verifone_1_1_constants.html#aee7e1fc8d0dc89a4552ed665c18825da">SDK_PARCEL_VERSION</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            } <span class="keywordflow">catch</span> (RemoteException e) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#af9382b923a644a15d5a395f7b069665b">e</a>(TAG, <span class="stringliteral">&quot;Unable to get transaction manager from service. &quot;</span> + e.getMessage());</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// Return the device channel, either null or the actual binder.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span> terminalChannel;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">     * Attempts to get the binder for the service. Returns the existing binder if the binder is</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     * still alive, otherwise initiates the binding process. If this is called from the main</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * thread and there is not a pre-existing binder, returns null, otherwise this blocks until</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * the binder can be retrieved.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    @Nullable</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a137140f3c7bcb540deed95cb072e32c2">  177</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> ITransactionService <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a137140f3c7bcb540deed95cb072e32c2">getServiceBinder</a>(Context context) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#a96048320fef672281c4e271d5c6b5b59">i</a>(TAG, <span class="stringliteral">&quot;getServiceBinder sITransactionService: &quot;</span> + sITransactionService);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        ITransactionService serviceBinder = null;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (isConnectionValid(sITransactionService))</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">return</span> sITransactionService;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            sITransactionService = null;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// If the current thread is not the main thread, then we should block until attached.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordtype">boolean</span> shouldBlockForBinding = (Looper.getMainLooper() != Looper.myLooper());</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keyword">final</span> Context appContext = context.getApplicationContext();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordtype">boolean</span> canBind;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aff8b6b070c4e25c98daf141cd9867cfa">d</a>(TAG, <span class="stringliteral">&quot;getServiceBinder shouldBlockForBinding: &quot;</span> + shouldBlockForBinding +</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                   <span class="stringliteral">&quot;\n\tsBindState: &quot;</span> + sBindState.name());</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (shouldBlockForBinding) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> lockTimeout = 400;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> bindingCheckLimit = 5;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordtype">int</span> bindingCheckCount = 0;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keyword">synchronized</span> (CONNECTION_LOCK) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="comment">// If we are already binding, block for it.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="comment">// If we are not already binding, start the binding process then block for it.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                canBind = sBindState == BindState.BINDING || <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#ad5a819ba2dc2dd61ab1abac90ffeeb2a">bindToService</a>(appContext, null);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="comment">// Only block if it&#39;s possible to bind.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">if</span> (canBind) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    sBindState = BindState.BINDING;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="comment">// A long timeout is fine, because we can also be notified.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <span class="keywordflow">while</span> (bindingCheckCount &lt; bindingCheckLimit &amp;&amp; sITransactionService == null) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                            CONNECTION_LOCK.wait(lockTimeout);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        } <span class="keywordflow">catch</span> (InterruptedException e) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                            <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">w</a>(TAG, <span class="stringliteral">&quot;Interrupted while waiting on binding.&quot;</span>, e);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                            <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aff8b6b070c4e25c98daf141cd9867cfa">d</a>(TAG, <span class="stringliteral">&quot;Done waiting.\n&quot;</span> +</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                       <span class="stringliteral">&quot;bindingCheckCount: &quot;</span> + bindingCheckCount + <span class="stringliteral">&quot;.\n&quot;</span> +</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                       <span class="stringliteral">&quot;intermediate: &quot;</span> + sITransactionService);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                            bindingCheckCount++;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// Done blocking, check if we obtained the binder, or if instead we just reached</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="comment">// the timeout.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span> (sITransactionService != null) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    serviceBinder = sITransactionService;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (canBind) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#af9382b923a644a15d5a395f7b069665b">e</a>(TAG,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                          <span class="stringliteral">&quot;Unable to bind to service, still waiting for the binding to complete.&quot;</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                } <span class="comment">// else can&#39;t bind, which is handled below.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="comment">// We can&#39;t block the main thread to wait for the binding, so just kick off the process</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            canBind = sBindState == BindState.BINDING</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                      || <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#ad5a819ba2dc2dd61ab1abac90ffeeb2a">bindToService</a>(appContext, null);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span> (canBind) sBindState = BindState.BINDING;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (!canBind) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            sBindState = BindState.INITIAL;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#af9382b923a644a15d5a395f7b069665b">e</a>(TAG, <span class="stringliteral">&quot;Unable to bind to service, check permissions and other system settings.&quot;</span>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> serviceBinder;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">     * Attaches an additional service connection object to be notified when events occur.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a120974aeb39510f2f75dcd1621b15249">  245</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a120974aeb39510f2f75dcd1621b15249">attachServiceConnection</a>(ServiceConnection altServiceConnection) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (altServiceConnection != null &amp;&amp; altServiceConnection != SERVICE_CONNECTION) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            CLIENT_CONNECTIONS.add(altServiceConnection);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">     * Removes an attached service connection from the list.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a675cac0fdc2844c029454eabd47b8795">  254</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a675cac0fdc2844c029454eabd47b8795">detachServiceConnection</a>(ServiceConnection altServiceConnection) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> (altServiceConnection != null &amp;&amp; altServiceConnection != SERVICE_CONNECTION) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            CLIENT_CONNECTIONS.remove(altServiceConnection);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    /** Unbinds from the service and cleans up any other references. */</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a4245287e2eee6876e77fc622168f728c">  261</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a4245287e2eee6876e77fc622168f728c">tearDown</a>(Context context) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        CLIENT_CONNECTIONS.clear();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span> (sITransactionService != null) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                sITransactionService.asBinder().unlinkToDeath(DEATH_RECIPIENT, 0);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            } <span class="keywordflow">catch</span> (NoSuchElementException e) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">w</a>(TAG,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                      <span class="stringliteral">&quot;Unable to unlink death recipient from service binder. &quot;</span> + e.getMessage());</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span> (isConnectionValid(sITransactionService)) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    sITransactionService.tearDown(sClientId);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                } <span class="keywordflow">catch</span> (RemoteException e) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">w</a>(TAG, <span class="stringliteral">&quot;Unable to tear down client. &quot;</span> + e.getMessage());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            sITransactionService = null;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        sBindState = BindState.INITIAL;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            context.unbindService(SERVICE_CONNECTION);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        } <span class="keywordflow">catch</span> (IllegalArgumentException e) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="comment">// Suppress this. It means the service wasn&#39;t started by this context, so ignore.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    /** Enables binding directly to the service. */</span></div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#ad5a819ba2dc2dd61ab1abac90ffeeb2a">  290</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#ad5a819ba2dc2dd61ab1abac90ffeeb2a">bindToService</a>(Context context, ServiceConnection altServiceConnection) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#a96048320fef672281c4e271d5c6b5b59">i</a>(TAG, <span class="stringliteral">&quot;bindToService&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a120974aeb39510f2f75dcd1621b15249">attachServiceConnection</a>(altServiceConnection);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">final</span> Intent intent = getIntentForBinding(context, ACTION_TRANSACTION_SERVICE, null);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (intent != null) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="comment">// intent.setComponent(TRANSACTION_SERVICE_COMPONENT_NAME);</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            intent.putExtra(EXTRA_CLIENT_IDENTIFIER, getClientId(context));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">return</span> context.bindService(intent, SERVICE_CONNECTION, Context.BIND_AUTO_CREATE);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    /** Convenient way to confirm the interface is not null and is alive. */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">boolean</span> isConnectionValid(IInterface iInterface) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> (iInterface != null &amp;&amp; iInterface.asBinder().isBinderAlive());</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">    /** Generates a client ID from the current context. */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> String getClientId(Context context) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (sClientId == null) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            Context applicationContext = context.getApplicationContext();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            String packageName = applicationContext.getPackageName();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            String versionName = <span class="stringliteral">&quot;0&quot;</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                PackageInfo packageInfo =</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                          applicationContext.getPackageManager().getPackageInfo(packageName, 0);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                versionName = packageInfo.versionName;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            } <span class="keywordflow">catch</span> (PackageManager.NameNotFoundException | NullPointerException e) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#a96048320fef672281c4e271d5c6b5b59">i</a>(TAG, <span class="stringliteral">&quot;Unable to get package information.&quot;</span>, e);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            sClientId = packageName + <span class="stringliteral">&quot;_&quot;</span> + versionName;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> sClientId;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    </div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    @Nullable</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> Intent getIntentForBinding(<span class="keyword">final</span> Context context, @NonNull <span class="keyword">final</span> String action, @Nullable <span class="keyword">final</span> String[] requiredPermissions) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">final</span> Intent intentToFind = <span class="keyword">new</span> Intent(action);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">final</span> PackageManager packageManager = context.getPackageManager();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        ResolveInfo serviceInfo = null;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    </div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> (requiredPermissions != null &amp;&amp; requiredPermissions.length &gt; 0) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">final</span> List&lt;PackageInfo&gt; permittedPackages = packageManager.getPackagesHoldingPermissions(</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                  requiredPermissions, 0);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">final</span> PackageInfo permittedPackage : permittedPackages) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                Intent packageSpecificIntent = <span class="keyword">new</span> Intent(intentToFind);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                packageSpecificIntent.setPackage(permittedPackage.packageName);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                List&lt;ResolveInfo&gt; resolvedInfos = packageManager.queryIntentServices(packageSpecificIntent, PackageManager.GET_META_DATA);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="keywordflow">if</span> (resolvedInfos != null &amp;&amp; !resolvedInfos.isEmpty()) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    serviceInfo = resolvedInfos.get(0);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            List&lt;ResolveInfo&gt; resolvedInfos = packageManager.queryIntentServices(intentToFind, 0);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">if</span> (resolvedInfos != null &amp;&amp; !resolvedInfos.isEmpty()) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                serviceInfo = resolvedInfos.get(0);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        </div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (serviceInfo != null) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment">//Get component info and create ComponentName</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keyword">final</span> String packageName = serviceInfo.serviceInfo.packageName;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keyword">final</span> String className = serviceInfo.serviceInfo.name;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keyword">final</span> ComponentName component = <span class="keyword">new</span> ComponentName(packageName, className);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">//Create a new intent. Use the old one for extras and such reuse</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keyword">final</span> Intent explicitIntent = <span class="keyword">new</span> Intent(intentToFind);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">//Set the component to be explicit</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            explicitIntent.setComponent(component);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">return</span> explicitIntent;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html">Log</a>.<a class="code" href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">w</a>(TAG, <span class="stringliteral">&quot;Unable to locate a service for action &quot;</span> + action + <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a1b1f5c1ca7eb70f9d6eabb1ef00109b8"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b1f5c1ca7eb70f9d6eabb1ef00109b8">com.verifone.commerce.payment.TransactionServiceConnector.TRANSACTION_SERVICE_COMPONENT_NAME</a></div><div class="ttdeci">static final ComponentName TRANSACTION_SERVICE_COMPONENT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00036">TransactionServiceConnector.java:36</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html">com.verifone.commerce.payment.TransactionServiceConnector</a></div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00030">TransactionServiceConnector.java:30</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1_constants_html_a55c29d48b001cbc9584063ecab38557b"><div class="ttname"><a href="classcom_1_1verifone_1_1_constants.html#a55c29d48b001cbc9584063ecab38557b">com.verifone.Constants.SDK_VERSION</a></div><div class="ttdeci">static final String SDK_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="_constants_8java_source.html#l00011">Constants.java:11</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_af191a26ee178a552a2f5ab55ba8fc83f"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#af191a26ee178a552a2f5ab55ba8fc83f">com.verifone.commerce.payment.TransactionServiceConnector.TRANSACTION_APPLICATION_PACKAGE</a></div><div class="ttdeci">static final String TRANSACTION_APPLICATION_PACKAGE</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00033">TransactionServiceConnector.java:33</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_ad5a819ba2dc2dd61ab1abac90ffeeb2a"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#ad5a819ba2dc2dd61ab1abac90ffeeb2a">com.verifone.commerce.payment.TransactionServiceConnector.bindToService</a></div><div class="ttdeci">static boolean bindToService(Context context, ServiceConnection altServiceConnection)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00290">TransactionServiceConnector.java:290</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager_html_aaabc6a0d5658d426a86a6fa1fc278370"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html#aaabc6a0d5658d426a86a6fa1fc278370">com.verifone.commerce.payment.TransactionManager.DEVICE_APPLICATION_NAME_KEY</a></div><div class="ttdeci">static final String DEVICE_APPLICATION_NAME_KEY</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_manager_8java_source.html#l00125">TransactionManager.java:125</a></div></div>
<div class="ttc" id="namespacecom_html"><div class="ttname"><a href="namespacecom.html">com</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1_constants_html"><div class="ttname"><a href="classcom_1_1verifone_1_1_constants.html">com.verifone.Constants</a></div><div class="ttdef"><b>Definition:</b> <a href="_constants_8java_source.html#l00006">Constants.java:6</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1_constants_html_aee7e1fc8d0dc89a4552ed665c18825da"><div class="ttname"><a href="classcom_1_1verifone_1_1_constants.html#aee7e1fc8d0dc89a4552ed665c18825da">com.verifone.Constants.SDK_PARCEL_VERSION</a></div><div class="ttdeci">static final int SDK_PARCEL_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="_constants_8java_source.html#l00016">Constants.java:16</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_log_html_aedd8bd59fdea90df494e564b12a2f6af"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_log.html#aedd8bd59fdea90df494e564b12a2f6af">com.verifone.utilities.Log.w</a></div><div class="ttdeci">static int w(String tag, String msg)</div><div class="ttdef"><b>Definition:</b> <a href="_log_8java_source.html#l00409">Log.java:409</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_log_html_a96048320fef672281c4e271d5c6b5b59"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_log.html#a96048320fef672281c4e271d5c6b5b59">com.verifone.utilities.Log.i</a></div><div class="ttdeci">static int i(String tag, String msg)</div><div class="ttdef"><b>Definition:</b> <a href="_log_8java_source.html#l00391">Log.java:391</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a675cac0fdc2844c029454eabd47b8795"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a675cac0fdc2844c029454eabd47b8795">com.verifone.commerce.payment.TransactionServiceConnector.detachServiceConnection</a></div><div class="ttdeci">static void detachServiceConnection(ServiceConnection altServiceConnection)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00254">TransactionServiceConnector.java:254</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a4245287e2eee6876e77fc622168f728c"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a4245287e2eee6876e77fc622168f728c">com.verifone.commerce.payment.TransactionServiceConnector.tearDown</a></div><div class="ttdeci">static void tearDown(Context context)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00261">TransactionServiceConnector.java:261</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager_html"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_manager.html">com.verifone.commerce.payment.TransactionManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_transaction_manager_8java_source.html#l00045">TransactionManager.java:45</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a37e59c2492cc509f79237d58f37c64cd"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a37e59c2492cc509f79237d58f37c64cd">com.verifone.commerce.payment.TransactionServiceConnector.getTransactionBinder</a></div><div class="ttdeci">static ITransactionManager getTransactionBinder(Context context, Map deviceParams)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00115">TransactionServiceConnector.java:115</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_log_html_af9382b923a644a15d5a395f7b069665b"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_log.html#af9382b923a644a15d5a395f7b069665b">com.verifone.utilities.Log.e</a></div><div class="ttdeci">static int e(String tag, String msg)</div><div class="ttdef"><b>Definition:</b> <a href="_log_8java_source.html#l00436">Log.java:436</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a1ed60c52af2ece4b505e1e2019ccd679"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1ed60c52af2ece4b505e1e2019ccd679">com.verifone.commerce.payment.TransactionServiceConnector.EXTRA_CLIENT_IDENTIFIER</a></div><div class="ttdeci">static final String EXTRA_CLIENT_IDENTIFIER</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00053">TransactionServiceConnector.java:53</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_log_html_aff8b6b070c4e25c98daf141cd9867cfa"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_log.html#aff8b6b070c4e25c98daf141cd9867cfa">com.verifone.utilities.Log.d</a></div><div class="ttdeci">static int d(String tag, String msg)</div><div class="ttdef"><b>Definition:</b> <a href="_log_8java_source.html#l00373">Log.java:373</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a00a2e669afcba96d1e35c2d4693d7d7a"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a00a2e669afcba96d1e35c2d4693d7d7a">com.verifone.commerce.payment.TransactionServiceConnector.TRANSACTION_SERVICE_PERMISSIONS</a></div><div class="ttdeci">static final String [] TRANSACTION_SERVICE_PERMISSIONS</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00046">TransactionServiceConnector.java:46</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1utilities_1_1_log_html"><div class="ttname"><a href="classcom_1_1verifone_1_1utilities_1_1_log.html">com.verifone.utilities.Log</a></div><div class="ttdef"><b>Definition:</b> <a href="_log_8java_source.html#l00068">Log.java:68</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a1b7f9c886050faf2a698aa84493af3cb"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a1b7f9c886050faf2a698aa84493af3cb">com.verifone.commerce.payment.TransactionServiceConnector.ACTION_TRANSACTION_SERVICE</a></div><div class="ttdeci">static final String ACTION_TRANSACTION_SERVICE</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00042">TransactionServiceConnector.java:42</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a137140f3c7bcb540deed95cb072e32c2"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a137140f3c7bcb540deed95cb072e32c2">com.verifone.commerce.payment.TransactionServiceConnector.getServiceBinder</a></div><div class="ttdeci">static ITransactionService getServiceBinder(Context context)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00177">TransactionServiceConnector.java:177</a></div></div>
<div class="ttc" id="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector_html_a120974aeb39510f2f75dcd1621b15249"><div class="ttname"><a href="classcom_1_1verifone_1_1commerce_1_1payment_1_1_transaction_service_connector.html#a120974aeb39510f2f75dcd1621b15249">com.verifone.commerce.payment.TransactionServiceConnector.attachServiceConnection</a></div><div class="ttdeci">static void attachServiceConnection(ServiceConnection altServiceConnection)</div><div class="ttdef"><b>Definition:</b> <a href="_transaction_service_connector_8java_source.html#l00245">TransactionServiceConnector.java:245</a></div></div>
<div class="ttc" id="namespacecom_1_1verifone_html"><div class="ttname"><a href="namespacecom_1_1verifone.html">com.verifone</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<!-- id is needed for treeview function! -->
<!-- <div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_5eb159725f84c66aafd839904a4acdd0.html">main</a></li><li class="navelem"><a class="el" href="dir_fd3f6763802dee1ad875f6c80eac0bda.html">java</a></li><li class="navelem"><a class="el" href="dir_d8517d8b842053dc3dd7dde525dd9163.html">com</a></li><li class="navelem"><a class="el" href="dir_9b6b50013e7e392aba59aadc54aeeafb.html">verifone</a></li><li class="navelem"><a class="el" href="dir_5d234abe0e652e900ca888f9b6a6f98e.html">commerce</a></li><li class="navelem"><a class="el" href="dir_ef3061e2d989be06e3b2367709aeb27a.html">payment</a></li><li class="navelem"><b>TransactionServiceConnector.java</b></li>
  </ul>
</div> -->
<div style="width: 100%;
	line-height: 140%;
	font: 400 14px/22px Roboto,sans-serif;
	color: black;">
<!--<div style="font-size: 11px;
	background-image: url('tab_b.png');
	background-repeat: repeat-x;
	background-position: 0 -5px;
	height: 30px;
	line-height: 30px;
	color: #8AA0CC;
	border: solid 1px #C2CDE4;
	overflow: hidden;
	margin: 0px;
	padding: 0px;"></div> -->
<p style="font-size: 11px;
	line-height: 100%;
	color: #ffffff;
	border: solid 1px #C2CDE4;
	margin: 10px;
	padding: 10px;">
This document is the confidential property of Verifone, Inc. Any reproduction or distribution of this document, in whole or in part, or the disclosure of any of the information contained herein, without the prior written consent of Verifone, Inc. is prohibited. This document and any supplemental material supplied as part of any review must be returned to Verifone, Inc. upon request. Notice: This document may go through material revisions over time. While the Company will make every effort to keep readers updated as changes occur, care must be taken by the reader to make sure they are reading the latest version.  Version numbers appear in the title page and revision history page of this document. All rights reserved. Verifone, the Verifone logo are either trademarks or registered trademarks of Verifone in the United States and/or other countries. All other trademarks or brand names are properties of their respective holders.</p>
</div>
</body>
</html>
